<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Next JWP Study 02 - hy43 wiki</title>

    <meta name="description" content="HTTP 이해">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://localhost:4000/blog/2017/04/08/jwp-02/">
    <link rel="alternate" type="application/rss+xml" title="hy43 wiki" href="http://localhost:4000/feed.xml" />

    <meta property="og:type" content="website">
    <meta property="og:title" content="Next JWP Study 02">
    <meta property="og:description" content="HTTP 이해">
    <meta property="og:image" content="http://localhost:4000/resource/johngrib.png">
    <meta property="og:url" content="http://localhost:4000/blog/2017/04/08/jwp-02/">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@John_Grib" />
    <meta name="twitter:url" content="http://localhost:4000/blog/2017/04/08/jwp-02/" />
    <meta name="twitter:title" content="Next JWP Study 02" />
    <meta name="twitter:description" content="HTTP 이해" />

    <link rel="apple-touch-icon" sizes="57x57"        href="/resource/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60"        href="/resource/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72"        href="/resource/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76"        href="/resource/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114"      href="/resource/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120"      href="/resource/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144"      href="/resource/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152"      href="/resource/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180"      href="/resource/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/resource/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"   href="/resource/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"   href="/resource/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"   href="/resource/icon/favicon-16x16.png">
    <link rel="manifest" href="/resource/icon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/resource/icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110224147-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-110224147-1');
    </script>



</head>
<header class="header">
    <div>
        <a class="site-title" href="/">hy43 wiki</a>
    </div>
    <div>
        <a class="site-title-right" href="/about/">me</a>
    </div>
    <div>
        <a id="random-button" class="site-title-right" href="/wiki/index/#random" onClick="if(typeof random === 'function')random()">random</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/">wiki</a>
    </div>
</header>
<script>
;(function(){
    var isCtrl = false;

    document.onkeyup=function(e){
        if (e.which == 17) {
            isCtrl = false;
        }
    }

    document.onkeydown=function(e){
        if(e.which == 17) {
            isCtrl = true;
        }
        if(e.which == 82 && isCtrl == true) {
            document.getElementById("random-button").click();
        }
    }
})();
</script>

    <body>
        <div class="page-content">
            <div class="search">
    <form role="search" method="get" action="/search/">
         <input name="searchString" class="searchInput" placeholder=" 검색하세요" type="text">
         <input type="submit" class="searchButton" value="Search">
    </form>
</div>
            <div class="post">
                <div class="post">
    <header class="post-header">
        <h1 class="page-title">
            <a href="/blog/2017/04/08/jwp-02/"> Next JWP Study 02 </a>
        </h1>
        <p class="created-date">
            2017.04.08
        </p>
        <div class="post-tag">
    study jwp 소트웍스-앤솔러지 martin-fowler oop
</div>

        <h2>HTTP 이해</h2>
    </header>


    <div class="toc">
    </div>

    <article class="post-content">
        <ul id="markdown-toc">
  <li><a href="#두-번째-수업-이모저모" id="markdown-toc-두-번째-수업-이모저모">두 번째 수업 이모저모</a>    <ul>
      <li><a href="#객체지향-생활-체조" id="markdown-toc-객체지향-생활-체조">객체지향 생활 체조</a></li>
      <li><a href="#for-루프를-쪼개야-할까" id="markdown-toc-for-루프를-쪼개야-할까"><code class="language-plaintext highlighter-rouge">for</code> 루프를 쪼개야 할까</a></li>
    </ul>
  </li>
  <li><a href="#코딩-실습-및-과제--http-웹-서버-구현" id="markdown-toc-코딩-실습-및-과제--http-웹-서버-구현">코딩 실습 및 과제 : HTTP 웹 서버 구현</a>    <ul>
      <li><a href="#요구사항" id="markdown-toc-요구사항">요구사항</a></li>
    </ul>
  </li>
  <li><a href="#과제-후기" id="markdown-toc-과제-후기">과제 후기</a></li>
  <li><a href="#links" id="markdown-toc-links">Links</a></li>
</ul>

<h1 id="두-번째-수업-이모저모">두 번째 수업 이모저모</h1>

<ul>
  <li>수업은 <code class="language-plaintext highlighter-rouge">2017-04-06 19:00:00 +0900</code>에 시작.
    <ul>
      <li>오늘부터 다음 주 목요일 <strong>2017-04-13</strong> 까지는 HTTP Web Server 개발 실습을 한다.</li>
      <li>그 다음주 월요일인 <strong>2017-04-17</strong> 에는 교수님의 라이브 코딩이 예정되어 있다.</li>
    </ul>
  </li>
  <li>단상 : 프로그래밍 연습 어떻게 할 것인가?
    <ul>
      <li>작은 프로그램을 반복적으로, 다양하게 구현해 보도록 한다.</li>
    </ul>
  </li>
  <li>
    <p>교수님 라이브 코딩 및 TDD 시범.</p>
  </li>
  <li>TDD 실천법에 대한 논의 및 Q &amp; A.
    <ul>
      <li>TDD 경험에 대한 발표.</li>
      <li>TDD를 하려면 객체지향 철학을 잘 활용해야 한다.</li>
      <li>로직 위주로 가도록 한다.</li>
      <li>과도한 테스트 코드는 지양한다.</li>
    </ul>
  </li>
  <li>마틴 파울러와 직원들이 지은 책 <a href="http://wikibook.co.kr/thoughtworks-anthology/">The ThoughtWorks Anthology</a>에 나온 <strong>객체지향 생활 체조</strong> 소개.
    <ul>
      <li>좋아하는 책이었기에 반가웠다.</li>
      <li>집에 돌아와 <strong>객체지향 생활 체조</strong> 챕터를 다시 읽어 보았다.</li>
    </ul>
  </li>
</ul>

<h2 id="객체지향-생활-체조">객체지향 생활 체조</h2>
<ol>
  <li>한 메서드에 오직 한 단계의 들여쓰기만 한다.</li>
  <li><code class="language-plaintext highlighter-rouge">else</code> 예약어<sub>keyword</sub>를 쓰지 않는다.</li>
  <li>모든 원시값과 문자열을 포장<sub>wrap</sub>한다.</li>
  <li>한 줄에 점을 하나만 찍는다.</li>
  <li>줄여쓰지 않는다(축약금지).</li>
  <li>모든 엔티티<sub>entity</sub>를 작게 유지한다.</li>
  <li>2개 이상의 인스턴스 변수를 가진 클래스를 쓰지 않는다.</li>
  <li>제일 클래스<sub>first-class</sub> 콜렉션을 쓴다.</li>
  <li>게터<sub>getter</sub>/세터<sub>setter</sub>/프로퍼티<sub>property</sub>를 쓰지 않는다.</li>
</ol>

<p>꽤 깐깐한 체조 같지만, 조금만 생각해보면 개발자의 멍청한 실수를 최대한 예방하는 좋은 습관들임을 알 수 있다.</p>

<p>문득 스티브 맥코넬이 <em>Code Complete</em> 에서 한 말이 생각났다.</p>

<blockquote>
  <p>최종 목표는 한번에 생각해야 하는 프로그램의 양을 최소화하는 것이다.</p>
</blockquote>

<h2 id="for-루프를-쪼개야-할까"><code class="language-plaintext highlighter-rouge">for</code> 루프를 쪼개야 할까</h2>
<p>Q &amp; A 시간에 <code class="language-plaintext highlighter-rouge">for</code> loop에 대한 이야기가 나왔다.</p>

<p>두 가지 일을 하는 하나의 <code class="language-plaintext highlighter-rouge">for</code> loop를 교수님이 한 가지 일을 하는 두 개의 <code class="language-plaintext highlighter-rouge">for</code>루프로 쪼갰는데 누군가 이런 말을 했다.</p>

<blockquote>
  <p>"for 루프가 두 번 돌아서 기분이 나쁩니다."</p>
</blockquote>

<p>지극히 정상적이고 상식적인 반응이다. 그러나 이것은 반론 불가능한 도그마일까? 복잡한 <code class="language-plaintext highlighter-rouge">for</code> 루프는 버그의 온상이다. 새벽 두 시에 끝이 안 보이는 <code class="language-plaintext highlighter-rouge">for</code> 루프를 투덜대며 분해해 본 경험을 누구나 갖고 있지 않나? 나는 약 3년 전, Scala를 사용하기 시작했을 무렵부터 루프를 쪼개는 습관을 갖게 되었는데 나 뿐만 아니라 주위의 동료들이 (아주 미묘한 차이이긴 하지만) 조금씩 더 행복해진 놀라운 경험이 있다.</p>

<p>찾아보니 이 건에 대해서도 스티브 맥코넬이 <em>Code Complete</em> 에 남겨 놓은 말이 있다.</p>

<blockquote>
  <p>루프가 한번에 두 가지 일을 하기 위해서 사용될 수 있다는 사실만으로는 두 가지 기능을 동시에 수행해도 된다는 것을 정당화하지 못한다. 하나의 루프는 반드시 한 가지 일만 수행하고 그 작업을 제대로 수행해야 한다는 면에서, 루틴과 같아야 한다. 만약 루프 하나만으로도 충분한 코드에 두 개의 루프를 사용하는 것이 비효율적인 것처럼 보인다면, 두 개의 루프로 코드를 작성한 후, 효율성을 위해서 결합될 수 있다는 것을 주석으로 작성하여, 두 개의 루프를 하나로 통합하기 전에 벤치마크 결과가 해당 코드 섹션에서 성능 문제가 발생한다는 것을 보고할 때까지 기다리도록 한다.</p>
</blockquote>

<p>생각해 볼 것들.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">O(2n)</code>와 <code class="language-plaintext highlighter-rouge">O(n)</code>의 관계.</li>
  <li>런타임 시간보다 개발/유지보수 시간을 중요하시는 관점.
    <ul>
      <li>산업의 유형에 따라 선호하는 언어가 다른 이유하고도 관련이 있다.</li>
    </ul>
  </li>
</ul>

<h1 id="코딩-실습-및-과제--http-웹-서버-구현">코딩 실습 및 과제 : HTTP 웹 서버 구현</h1>

<ul>
  <li>이 작업은 박재성 교수님의 <a href="https://github.com/slipp/web-application-server">web-application-server</a>를 fork하여 수행하도록 한다.</li>
  <li>다음 시간까지 최소한 요구사항 5 까지는 작업해 올 것.</li>
</ul>

<h2 id="요구사항">요구사항</h2>

<ul>
  <li>요구사항 1 : 웹서버 구색 갖추기
    <ul>
      <li>http://localhost:8080/index.html 로 접속했을 때 webapp 디렉토리의 index.html 파일을 읽어 클라이언트에 응답한다.</li>
    </ul>
  </li>
  <li>요구사항 2 : 회원가입 구현.</li>
  <li>요구사항 3 : 회원가입 구현기능을 post 방식으로 변경하기.</li>
  <li>요구사항 4 : 회원 가입을 완료하면 /index.html로 이동하게 한다.</li>
  <li>요구사항 5 : 로그인 구현, 로그인 성공/실패시 페이지 리다이렉트.</li>
  <li>요구사항 6 : 로그인 상태에서 /user/list로 접근하면 사용자 목록 출력.</li>
  <li>요구사항 7 : css 지원.</li>
</ul>

<h1 id="과제-후기">과제 후기</h1>

<ul>
  <li>만들다보니 <code class="language-plaintext highlighter-rouge">Annotation</code> 기반의 Controller Interface 형태의 웹 서버를 구현하게 되었다.</li>
  <li>평소 <code class="language-plaintext highlighter-rouge">Annotation</code>을 자바 진영의 일종의 <strong>흑마술</strong> 이라고 생각해서 별로 좋아하지 않았는데, 직접 뭔가 만드는 데 사용해보니 엄청 편리하다. <code class="language-plaintext highlighter-rouge">Annotation</code>에 대한 호의가 무럭무럭.</li>
  <li>
    <p>나는 immutable 개념을 좋아해서 가능한 한 변수는 사용하지 않고 <code class="language-plaintext highlighter-rouge">final</code> 상수를 사용하며, 중요 <code class="language-plaintext highlighter-rouge">Map</code>과 <code class="language-plaintext highlighter-rouge">List</code>는 <code class="language-plaintext highlighter-rouge">unmodifiable</code>을 씌워줬다. Java 문법상 꼭 키워드를 하나씩 더 타이핑해야 해서 너무 귀찮았다. Java의 문법은 내 언어 습관상으로는 몹시 수다스럽다. Vim이 아니라 IntelliJ의 조악한 Vim 플러그인으로 코딩을 했더니 손가락이 얼얼하다.</p>
  </li>
  <li>내 구현 내용은 <a href="https://github.com/johngrib/web-application-server/tree/02-http">Github repository</a>에 올려두었다.
    <ul>
      <li><a href="https://github.com/johngrib/web-application-server/blob/02-http/src/main/java/webserver/RequestHandler.java">RequestHandler</a> : 이거 리팩토링하느라 걸린 시간이 전체 개발 시간의 80% 는 되는 것 같다.</li>
      <li><a href="https://github.com/johngrib/web-application-server/blob/02-http/src/main/java/controller/UserLogin.java">UserLogin 클래스</a> : Spring 처럼 <code class="language-plaintext highlighter-rouge">Controller</code> 어노테이션을 만들어 적용해 보았다. 재밌었다.</li>
    </ul>
  </li>
</ul>

<h1 id="links">Links</h1>

<ul>
  <li><a href="https://github.com/slipp/web-application-server">web-application-server</a></li>
  <li><a href="https://nextstep.camp/courses/-KgDNT4rfavb_BzYLBXr/-Kf9koDWsc8jpIgwbgR5/lessons">강의 자료</a></li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections">MDN - Http Redirections</a></li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">MDN - Http Cookies</a></li>
</ul>

    </article>
    <script>
    ;(function() {
        var tags = document.querySelectorAll('.post-tag');
        if(tags == null || tags.length < 1) {
            return;
        }

        for (var i = 0; i < tags.length; i++) {
            var item = tags[i];
            var tagList = item.innerHTML.trim();

            if(/^\s*$/.test(tagList)) {
                continue;
            }
            tagList = tagList.split(/\s+/)
                .map(function(tag) {
                    return `<a href="/tag/#${tag}">#${tag}</a>`;
                })
                .join(' ');
            console.log(tagList);
            tags[i].innerHTML = tagList;
        }
        return;
    })();
    ;(function() {
        var post = document.querySelector('article.post-content');

        if(post == null) {
            return;
        }

        (function iterate_node(node) {

            if (/^(?:p|ul|h\d|table)$/i.test(node.tagName)) {

                node.innerHTML = link(node.innerHTML);

            } else { // Node.ELEMENT_NODE
                for (var i = 0; i < node.childNodes.length; i++) {
                    iterate_node(node.childNodes[i]);
                }
            }
        })(post);

        function link(content) {
            // (1) "\[[escape]]" 와 같이 앞에 "\"가 있다면 "\[\[escape\]\]" 로 바꾸기만 하고 링크는 생성하지 않는다.
            content = content.replace(/\\\[\[(.+?)\]\]/g, '\\[\\[$1\\]\\]');
            // (2) 다음과 같은 문자열을 <a href="/wiki/document">document-name</a> 으로 replace하여 링크를 만든다.
            //  [[document]]{document-name}       => <a href="/wiki/document">document-name</a>
            //  [[/document]]{document-name}      => <a href="/wiki/document">document-name</a>
            //  [[/dir/document]]{document-name}  => <a href="/wiki/dir/document">document-name</a>
            content = content.replace(/\[\[\/?([^\[\]]+?)\]\]\{([^\{\}]+?)\}/g, '<a href="/wiki/$1">$2</a>');
            // (3) "[[document]]"가 있다면 <a href="/wiki/document">document</a> 와 같이 replace하여 링크를 만든다.
            //  예제는 (2)와 거의 비슷하다.
            content = content.replace(/\[\[\/?(.+?)\]\]/g, '<a href="/wiki/$1">$1</a>');
            // (4) (1)에서 이스케이프한 문자열을 본래 표현하려 한 형식으로 되돌린다.
            content = content.replace(/\\\[\\\[(.+?)\\\]\\\]/g, '[[$1]]');
            return content;
        }

    })();
</script>

    
    <div class="post-comments">
    
    
        <script src="https://utteranc.es/client.js"
            repo="hy43/hy43.github.io"
            issue-term="url"
            label="Comment"
            branch="master"
        async>
        </script>
    
    </div>


    <script async src="/js/toc-highlight.js"></script>
</div>

            </div>
        </div>
        <footer class="footer">
    <div>

    </div>

    <script data-ad-client="ca-pub-3675948545737694" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</footer>
    </body>
</html>
